{"version":3,"file":"animated-tools.js","sources":["../../src/components/animated-tools.hbs","../../src/components/animated-tools.js"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{#unless this.isHidden}}\\n  <div class=\\\"animated-tools {{if this.isOpen \\\"is-open\\\"}}\\\" ...attributes>\\n    <div class=\\\"animated-tools-launcher\\\" role=\\\"button\\\" {{on \\\"click\\\" this.toggle}}>\\n      <MotionIndicator />\\n      ‚è±{{! <--- there\\'s an emoji here, in case your editor doesn\\'t show it }}\\n    </div>\\n    <div class=\\\"animated-tools-panel\\\">\\n      <TimeControl />\\n    </div>\\n  </div>\\n{{/unless}}\\n\")","import Component from '@glimmer/component';\nimport { tracked } from '@glimmer/tracking';\nimport { action } from '@ember/object';\nimport './animated-tools.css';\n\nexport default class AnimatedTools extends Component {\n  @tracked isOpen = false;\n\n  // always hidden in fastboot\n  @tracked isHidden = true;\n\n  constructor() {\n    super(...arguments);\n\n    if (typeof FastBoot === 'undefined') {\n      this.isOpen = !!localStorage.getItem('animated-tools-open');\n\n      // hidden if we're using hideUntilKeys and the keys haven't been pressed yet.\n      this.isHidden =\n        this.args.hideUntilKeys &&\n        !localStorage.getItem('animated-tools-activated');\n\n      if (this.args.hideUntilKeys) {\n        this._keyListener = this._keyListener.bind(this);\n        document.addEventListener('keydown', this._keyListener);\n      }\n    }\n  }\n\n  willDestroy() {\n    super.willDestroy(...arguments);\n\n    if (typeof FastBoot === 'undefined' && this.args.hideUntilKeys) {\n      document.removeEventListener('keydown', this._keyListener);\n    }\n  }\n\n  get tests() {\n    if (!this.args.hideUntilKeys) {\n      return null;\n    }\n    return this.args.hideUntilKeys.split('-').map((part) => {\n      if (part === 'Ctrl') {\n        return (event) => event.ctrlKey;\n      }\n      if (part === 'Alt') {\n        return (event) => event.altKey;\n      }\n      if (part === 'Shift') {\n        return (event) => event.shiftKey;\n      }\n      return (event) => event.code === part;\n    });\n  }\n\n  _keyListener(event) {\n    if (this.tests.every((test) => test(event))) {\n      if (localStorage.getItem('animated-tools-activated')) {\n        this.deactivate();\n      } else {\n        this.activate();\n        this.open();\n      }\n    }\n  }\n\n  @action toggle() {\n    if (this.isOpen) {\n      this.hide();\n    } else {\n      this.open();\n    }\n  }\n\n  open() {\n    localStorage.setItem('animated-tools-open', true);\n    this.isOpen = true;\n  }\n\n  hide() {\n    localStorage.removeItem('animated-tools-open');\n    this.isOpen = false;\n  }\n\n  activate() {\n    localStorage.setItem('animated-tools-activated', true);\n    this.isHidden = false;\n  }\n\n  deactivate() {\n    localStorage.removeItem('animated-tools-activated');\n    this.isHidden = true;\n  }\n}\n"],"names":["AnimatedTools","Component","g","this","prototype","tracked","i","void 0","constructor","arguments","FastBoot","isOpen","localStorage","getItem","isHidden","args","hideUntilKeys","_keyListener","bind","document","addEventListener","willDestroy","removeEventListener","tests","split","map","part","event","ctrlKey","altKey","shiftKey","code","every","test","deactivate","activate","open","toggle","hide","n","action","setItem","removeItem","setComponentTemplate","TEMPLATE"],"mappings":"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"}